
////////////////////////////////////////////////////////////////////////////////
// Универсальные методы для формы записи регистра и формы настройки налогов
//
// Клиентские методы формы записи регистра сведений НастройкиУчетаНДФЛ
//
////////////////////////////////////////////////////////////////////////////////

#Область СлужебныеПроцедурыИФункции

#Область ОбработчикиСобытийЭлементовШапкиФормы

Процедура ВестиУчетПоВидамДеятельностиПриИзменении(Форма, Элемент) Экспорт
	
	Запись = Форма.НастройкиУчетаНДФЛ;
	
	УстановитьВидДеятельностиДоходовСАвансовПоУмолчанию(Запись);
	
	НастройкиУчетаНДФЛФормыКлиентСервер.УправлениеФормой(Форма);
	
КонецПроцедуры

Процедура АвансыВключаютсяВДоходыВПериодеПолученияПриИзменении(Форма, Элемент) Экспорт
	
	Запись = Форма.НастройкиУчетаНДФЛ;
	
	Запись.АвансыВключаютсяВДоходыВПериодеПолучения = (Форма.АвансыВключаютсяВДоходыВПериодеПолучения = 1);
	
	УстановитьВидДеятельностиДоходовСАвансовПоУмолчанию(Запись);
	
	НастройкиУчетаНДФЛФормыКлиентСервер.УправлениеФормой(Форма);
	
КонецПроцедуры

Процедура ДляПризнанияРасходовТребуетсяПолучениеДоходаПриИзменении(Форма, Элемент) Экспорт
	
	Запись = Форма.НастройкиУчетаНДФЛ;
	
	Если Не Запись.ДляПризнанияРасходовТребуетсяПолучениеДохода Тогда
		Форма.ПризнаватьРасходыПоОперациямПрошлогоГода = 0;
	КонецЕсли;
	
	НастройкиУчетаНДФЛФормыКлиентСервер.УправлениеФормой(Форма);
	
КонецПроцедуры

Процедура ПризнаватьРасходыПоОперациямПрошлогоГода(Форма, Элемент) Экспорт
	
	Запись = Форма.НастройкиУчетаНДФЛ;
	
	Запись.ПризнаватьРасходыПоОперациямПрошлогоГода = (Форма.ПризнаватьРасходыПоОперациямПрошлогоГода = 1);
	
КонецПроцедуры

#КонецОбласти

#Область ОбработчикиКомандФормы

Процедура ВсеВидыДеятельности(Форма, Команда) Экспорт
	
	ОткрытьФорму("Справочник.ВидыДеятельностиПредпринимателей.ФормаСписка", , Форма);
	
КонецПроцедуры

#КонецОбласти

Процедура УстановитьВидДеятельностиДоходовСАвансовПоУмолчанию(Запись)
	
	Если Запись.ВестиУчетПоВидамДеятельности
		И Запись.АвансыВключаютсяВДоходыВПериодеПолучения
		И Не ЗначениеЗаполнено(Запись.ВидДеятельностиДоходовПоАвансам) Тогда
		
		Запись.ВидДеятельностиДоходовПоАвансам = Запись.ОсновнойВидДеятельности;
		
	КонецЕсли;
	
КонецПроцедуры

#КонецОбласти