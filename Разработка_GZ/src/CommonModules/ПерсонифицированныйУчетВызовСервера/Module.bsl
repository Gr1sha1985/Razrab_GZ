////////////////////////////////////////////////////////////////////////////////
//
//   Подсистема персонифицированного учета - вызов серверных функций с клиента.
// 
////////////////////////////////////////////////////////////////////////////////

#Область СлужебныеПроцедурыИФункции

Функция КомплектСодержащийРСВ_1(РСВ_1) Экспорт
	Возврат Справочники.КомплектыОтчетностиПерсУчета.КомплектСодержащийРСВ_1(РСВ_1);
КонецФункции	
	
Функция ОписаниеАктивногоКомплектаПериода(Организация, ОтчетныйПериод) Экспорт
	Возврат Справочники.КомплектыОтчетностиПерсУчета.ОписаниеАктивногоКомплектаПериода(Организация, ОтчетныйПериод, Ложь);	
КонецФункции

Функция КатегорииЗастрахованныхЛицОрганизации(Организация, ОтчетныйПериод, КорректирующиеСведения = Ложь) Экспорт
	Возврат ПерсонифицированныйУчет.КатегорииЗастрахованныхЛицОрганизации(Организация, ОтчетныйПериод, ,КорректирующиеСведения);	
КонецФункции

Функция ПолучитьДанныеФайла(Ссылка, УникальныйИдентификатор) Экспорт	
	Возврат ЗарплатаКадры.ПолучитьДанныеФайла(Ссылка, УникальныйИдентификатор, Истина, Ложь);	
КонецФункции

Функция ДанныеАвтоподбораОснованияДосрочногоНазначенияПенсии(Текст, ОтчетныйПериод) Экспорт 
	
	Запрос = Новый Запрос;
	
	Запрос.УстановитьПараметр("Текст", Текст + "%");
	
	Запрос.Текст = "ВЫБРАТЬ РАЗРЕШЕННЫЕ
	               |	ОснованияДосрочногоНазначенияПенсии.Ссылка КАК Ссылка,
	               |	ОснованияДосрочногоНазначенияПенсии.Код КАК Код
	               |ИЗ
	               |	Справочник.ОснованияДосрочногоНазначенияПенсии КАК ОснованияДосрочногоНазначенияПенсии
	               |ГДЕ
	               |	ОснованияДосрочногоНазначенияПенсии.Код ПОДОБНО &Текст
	               |
	               |ОБЪЕДИНИТЬ ВСЕ
	               |
	               |ВЫБРАТЬ
	               |	ОсобыеУсловияТрудаПФР.Ссылка,
	               |	ОсобыеУсловияТрудаПФР.Код
	               |ИЗ
	               |	Справочник.ОсобыеУсловияТрудаПФР КАК ОсобыеУсловияТрудаПФР
	               |ГДЕ
	               |	ОсобыеУсловияТрудаПФР.Код ПОДОБНО &Текст";
	
	Если ОтчетныйПериод < '20020101' Тогда 
		Запрос.Текст = СтрЗаменить(Запрос.Текст, "Справочник.ОснованияДосрочногоНазначенияПенсии", "Справочник.ОснованияДосрочногоНазначенияПенсииДляСЗВК");
		Запрос.Текст = СтрЗаменить(Запрос.Текст, "Справочник.ОсобыеУсловияТрудаПФР", "Справочник.ОсобыеУсловияТрудаДляСЗВКПФР");
	КонецЕсли;
	
	ДанныеВыбора = Новый СписокЗначений;
	
	Выборка = Запрос.Выполнить().Выбрать();
	Пока Выборка.Следующий() Цикл
		ДанныеВыбора.Добавить(Выборка.Ссылка, Выборка.Код);
	КонецЦикла;
	
	ДанныеВыбора.СортироватьПоПредставлению();
	
	Возврат ДанныеВыбора;
	
КонецФункции

#КонецОбласти
